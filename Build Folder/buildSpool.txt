SQL> START "C:\Class\cprg250sDB\Project\ProjectDeli4\Deliverable4\Build Folder\buildTimberDB.sql"
SQL> DROP TABLE CUSTOMER CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE SUPPLIER CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE PRODUCT CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE SHIP_RATE CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE TAX CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE PRODUCT_REVIEW CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE TIMBER_CATEGORY CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE ORDER_ITEM CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE PRODUCT_SUPPLIER CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE ORDER_TABLE CASCADE CONSTRAINTS;

Table dropped.

SQL> DROP TABLE CUSTOMER_REVIEW CASCADE CONSTRAINTS;

Table dropped.

SQL> 
SQL> 
SQL> CREATE TABLE CUSTOMER
  2  (
  3  CUSTOMER# NUMBER(10) NOT NULL,
  4  FIRST_NAME VARCHAR2(50) NOT NULL,
  5  LAST_NAME VARCHAR2(50) NOT NULL,
  6  PHONE VARCHAR2(12) NOT NULL,
  7  ADDRESS_ VARCHAR2(20) NOT NULL,
  8  CITY VARCHAR2(15) NOT NULL,
  9  PROVINCE  CHAR(6) NOT NULL,
 10  POSTAL_CODE CHAR(6) NOT NULL,
 11  TIMBER_NUMBER NUMBER(1) NOT NULL,
 12  	  CONSTRAINT CUSTOMER#_PK PRIMARY KEY(CUSTOMER#)
 13  );

Table created.

SQL> 
SQL> CREATE TABLE SUPPLIER
  2  (
  3  SUPPLIER# NUMBER(10),
  4  NAME VARCHAR2(50) NOT NULL,
  5  EMAIL VARCHAR2(20) NOT NULL,
  6  CITY VARCHAR2(20),
  7  PROVINCE CHAR(2),
  8  	 CONSTRAINT SUPPLIER_PK PRIMARY KEY(SUPPLIER#),
  9  	 CONSTRAINT PROVINCE_CK CHECK(PROVINCE in ('BC', 'AB', 'SK', 'MB', 'ON', 'QC', 'NB', 'NS', 'BC', 'AB', 'SK', 'MB', 'ON', 'QC', 'NB', 'NS',
 10  	     'NL', 'NT', 'NU', 'PE', 'YT'))
 11  );

Table created.

SQL> 
SQL> CREATE TABLE TIMBER_CATEGORY
  2  (
  3  CATEGORY# NUMBER(5),
  4  PRODUCT_CATEGORY VARCHAR2(50) NOT NULL,
  5  PRODUCT_SUBCATEGORY VARCHAR2(50),
  6  	 CONSTRAINT TIMBER_CATEGORY_PK PRIMARY KEY(CATEGORY#)
  7  );

Table created.

SQL> 
SQL> CREATE TABLE PRODUCT
  2  (
  3  PRODUCT# NUMBER(10),
  4  CATEGORY# NUMBER(5),
  5  TITLE VARCHAR2(50) NOT NULL,
  6  DESCRIPTION_ VARCHAR2(1000) NOT NULL,
  7  PRICE NUMBER(10,2) NOT NULL,
  8  WEIGHT_ NUMBER(5,2) NOT NULL,
  9  TAX_EXEMPTED NUMBER(1) NOT NULL,
 10  	 CONSTRAINT PRODUCT_PK PRIMARY KEY(PRODUCT#),
 11  	 CONSTRAINT TIMBER_CATEGORY_PRODUCT_FK FOREIGN KEY(CATEGORY#) REFERENCES TIMBER_CATEGORY(CATEGORY#),
 12  	 CONSTRAINT PRICE_CK CHECK(PRICE>0),
 13  	 CONSTRAINT TAX_EXEMPTED_CK CHECK(TAX_EXEMPTED in (0,1))
 14  );

Table created.

SQL> 
SQL> CREATE TABLE SHIP_RATE
  2  (
  3  SHIPRATE# NUMBER(10),
  4  MIN_WEIGHT NUMBER(4,1) NOT NULL,
  5  MAX_WEIGHT NUMBER(4,1) NOT NULL,
  6  PRICE NUMBER(6,2),
  7  	  CONSTRAINT SHIPRATE#_PK PRIMARY KEY(SHIPRATE#),
  8  	  CONSTRAINT MIN_MAX_WEIGHT_CK CHECK(MAX_WEIGHT >= MIN_WEIGHT)
  9  );

Table created.

SQL> 
SQL> CREATE TABLE TAX
  2  (
  3  PROV CHAR(2),
  4  PROV_HST NUMBER(5,3),
  5  PROV_GST NUMBER(5,3),
  6  	  CONSTRAINT TAX_PK PRIMARY KEY(PROV)
  7  );

Table created.

SQL> 
SQL> CREATE TABLE PRODUCT_REVIEW
  2  (
  3  REVIEW# NUMBER,
  4  PRODUCT# NUMBER(10),
  5  RATING NUMBER(1),
  6  COMMENTS VARCHAR2(1000),
  7  	  CONSTRAINT PRODUCT_REVIEW_PK PRIMARY KEY(REVIEW#),
  8  	  CONSTRAINT PRODUCT_REVIEW_PRODUCT#_FK FOREIGN KEY(PRODUCT#) REFERENCES PRODUCT(PRODUCT#),
  9  	  CONSTRAINT PRODUCT_REVIEW_RATING_CK CHECK(RATING in (1,2,3,4,5))
 10  );

Table created.

SQL> 
SQL> CREATE TABLE ORDER_ITEM
  2  (
  3  ORDER# NUMBER(10),
  4  PRODUCT# NUMBER(10),
  5  QUANTITY NUMBER(3) NOT NULL,
  6  	 CONSTRAINT ORDER_ITEM_PK PRIMARY KEY(ORDER#),
  7  	 CONSTRAINT ORDER_ITEM_FK FOREIGN KEY(PRODUCT#) REFERENCES PRODUCT(PRODUCT#),
  8  	 CONSTRAINT QUANTITY_ORDER_ITEM_CK CHECK(QUANTITY > 0)
  9  );

Table created.

SQL> 
SQL> CREATE TABLE PRODUCT_SUPPLIER
  2  (
  3  PRODUCT# NUMBER(10),
  4  SUPPLIER# NUMBER(10),
  5  QUANTITY NUMBER(3),
  6  DAYS_TODELIVER NUMBER(2),
  7  	 CONSTRAINT PRODUCT_SUPPLIER_PK PRIMARY KEY(PRODUCT#, SUPPLIER#),
  8  	 CONSTRAINT PRODCT_PRODUCT_SUPPLIER_FK FOREIGN KEY(PRODUCT#)
  9  	     REFERENCES PRODUCT(PRODUCT#),
 10  	 CONSTRAINT SUPPLIER_PRODUCT_SUPPLIER_FK FOREIGN KEY(SUPPLIER#)
 11  	     REFERENCES SUPPLIER(SUPPLIER#),
 12  	 CONSTRAINT QUANTITY_CK CHECK(QUANTITY>=0),
 13  	 CONSTRAINT DAYS_TODELIVER_CK CHECK(DAYS_TODELIVER>=0)
 14  );

Table created.

SQL> 
SQL> CREATE TABLE ORDER_TABLE
  2  (
  3  ORDER# NUMBER(10),
  4  CUSTOMER# NUMBER(10),
  5  ORDER_DATE DATE,
  6  TAX NUMBER(10,2),
  7  SHIPRATE# NUMBER NOT NULL,
  8  PROV CHAR(2) NOT NULL,
  9  	  CONSTRAINT ORDER_TABLE_PK PRIMARY KEY(ORDER#, CUSTOMER#),
 10  	  CONSTRAINT SHIPRATE_ORDER_FK FOREIGN KEY(SHIPRATE#) REFERENCES SHIP_RATE(SHIPRATE#),
 11  	  CONSTRAINT CUSTOMER#_ORDER_FK FOREIGN KEY(CUSTOMER#) REFERENCES CUSTOMER(CUSTOMER#),
 12  	  CONSTRAINT ORDER_ORDER_TABLE_FK FOREIGN KEY(ORDER#) REFERENCES ORDER_ITEM(ORDER#),
 13  	  CONSTRAINT PROV_ORDER_FK FOREIGN KEY(PROV) REFERENCES TAX(PROV)
 14  );

Table created.

SQL> 
SQL> CREATE TABLE CUSTOMER_REVIEW
  2  (
  3  CUSTOMER# NUMBER(10),
  4  REVIEW# NUMBER,
  5  DATE_REVIEW DATE,
  6  	  CONSTRAINT CUSTOMER_REVIEW_PK PRIMARY KEY(CUSTOMER#, REVIEW#),
  7  	  CONSTRAINT CUSTOMER_REVIEW_CUSTOMER#_FK FOREIGN KEY(CUSTOMER#) REFERENCES CUSTOMER(CUSTOMER#),
  8  	  CONSTRAINT CUSTOMER_REVIEW_REVIEW#_FK FOREIGN KEY(REVIEW#) REFERENCES PRODUCT_REVIEW(REVIEW#)
  9  );

Table created.

SQL> 
SQL> SPOOL OFF
